<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contact | Jim Ross</title>
  <link rel="stylesheet" href="static/colors.css">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="bird.png" type="image/png">
  <link rel="apple-touch-icon" href="bird.png">
  <style>
    .contact-methods {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 16px;
    }
    .linkedin-logo {
      display: inline-block;
      width: 48px;
      height: 48px;
      vertical-align: middle;
      transition: transform 0.2s cubic-bezier(.36,.07,.19,.97);
    }
    .linkedin-logo:hover {
      transform: scale(1.2) rotate(-10deg);
      animation: linkedin-jiggle 0.4s infinite;
    }
    @keyframes linkedin-jiggle {
      0% { transform: scale(1.2) rotate(-10deg); }
      25% { transform: scale(1.2) rotate(10deg); }
      50% { transform: scale(1.2) rotate(-10deg); }
      75% { transform: scale(1.2) rotate(10deg); }
      100% { transform: scale(1.2) rotate(0deg); }
    }
    .main h2, #contact-details > h2 { text-align: center; }
    body {
      background: var(--bg-primary);
      font-family: Arial, sans-serif;
      color: var(--text-secondary);
    }
    .contact-container {
      background: var(--bg-tertiary);
      border-radius: 24px;
      max-width: 480px;
      margin: 32px auto;
      padding: 32px 32px 16px 32px;
      text-align: center;
    }
    .contact-container h2 {
      margin-bottom: 24px;
      font-size: 1.5em;
      font-weight: 600;
      color: var(--accent-blue);
      text-align: center;
    }
    .contact-note { text-align: center; }
    .form-label {
      display: block;
      text-align: left;
      margin-bottom: 6px;
      font-size: 1em;
      color: var(--text-label);
    }
    .form-input {
      width: 100%;
      padding: 10px;
      margin-bottom: 18px;
      border: 1px solid var(--border-light);
      border-radius: 8px;
      font-size: 1em;
      background: #ffffff;
      color: #000;
      box-sizing: border-box;
    }
    .form-textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-light);
      border-radius: 8px;
      font-size: 1em;
      background: #ffffff;
      color: #000;
      min-height: 80px;
      box-sizing: border-box;
      margin-bottom: 18px;
    }
    .send-btn {
      width: 100%;
      background: #4DC3FA;
      color: var(--text-primary);
      border: none;
      border-radius: 8px;
      padding: 14px 0;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      margin-top: 8px;
      margin-bottom: 8px;
      transition: background 0.2s;
    }
    .send-btn:hover { background: #ff8000; }
    .privacy {
      font-size: 0.95em;
      color: var(--text-muted);
      margin-top: 12px;
    }
    .privacy a {
      color: var(--accent-blue);
      text-decoration: underline;
    }
  </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8455447739531378"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <a href="index.html" aria-label="Homepage" class="logo-link">
      <img src="bird.png" alt="Logo" class="Logo">
    </a>
    <h1 class="site-title"><a href="index.html">Jim Ross</a></h1>

    <button class="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false">
      <span class="sr-only">Menu</span>
      <span class="hamburger-line line1"></span>
      <span class="hamburger-line line2"></span>
      <span class="hamburger-line line3"></span>
    </button>

    <nav id="primary-navigation" class="primary-navigation" data-visible="false">
      <a href="index.html" class="nav-link">Home</a>
      <a href="aboutme.html" class="nav-link about-link"><span class="link-text">About</span></a>
      <a href="projects.html" class="nav-link">Projects</a>
      <a href="music.html" class="nav-link">Music</a>
      <a href="traintt.html" class="nav-link">Train Times</a>
      <a href="contact.html" class="nav-link active-nav-link">Contact</a>
    </nav>
  </header>

  <main>
    <section id="contact-details">
      <h2>Get in Touch</h2>
      <p class="page-intro">I'm always open to discussing new projects, creative ideas, or opportunities to be part of something great.</p>

      <div class="contact-container">
        <h2>Send us a message!</h2>

        <!-- Same-origin API handled by Worker route: thejimross.co.uk/api/contact* -->
        <form id="contact-form" method="POST" action="/api/contact" style="margin-bottom:2em;max-width:420px;background:#2e3548;padding:1.5em;border-radius:12px;">
          <label class="form-label" for="name">Name:</label>
          <input class="form-input" type="text" id="name" name="name" required autocomplete="name" placeholder="Name">

          <label class="form-label" for="email">Email:</label>
          <input class="form-input" type="email" id="email" name="email" required autocomplete="email" placeholder="Email">

          <label class="form-label" for="country">Country:</label>
          <select class="form-input" id="country" name="country" style="margin-bottom:12px;">
            <option value="GB" data-code="+44">ðŸ‡¬ðŸ‡§ United Kingdom (+44)</option>
            <option value="US" data-code="+1">ðŸ‡ºðŸ‡¸ United States (+1)</option>
            <option value="CA" data-code="+1">ðŸ‡¨ðŸ‡¦ Canada (+1)</option>
            <option value="AU" data-code="+61">ðŸ‡¦ðŸ‡º Australia (+61)</option>
            <option value="IN" data-code="+91">ðŸ‡®ðŸ‡³ India (+91)</option>
            <option value="FR" data-code="+33">ðŸ‡«ðŸ‡· France (+33)</option>
            <option value="DE" data-code="+49">ðŸ‡©ðŸ‡ª Germany (+49)</option>
            <option value="IE" data-code="+353">ðŸ‡®ðŸ‡ª Ireland (+353)</option>
            <option value="IT" data-code="+39">ðŸ‡®ðŸ‡¹ Italy (+39)</option>
            <option value="ES" data-code="+34">ðŸ‡ªðŸ‡¸ Spain (+34)</option>
            <option value="NL" data-code="+31">ðŸ‡³ðŸ‡± Netherlands (+31)</option>
            <option value="BE" data-code="+32">ðŸ‡§ðŸ‡ª Belgium (+32)</option>
            <option value="NZ" data-code="+64">ðŸ‡³ðŸ‡¿ New Zealand (+64)</option>
            <option value="ZA" data-code="+27">ðŸ‡¿ðŸ‡¦ South Africa (+27)</option>
            <option value="SG" data-code="+65">ðŸ‡¸ðŸ‡¬ Singapore (+65)</option>
            <option value="CN" data-code="+86">ðŸ‡¨ðŸ‡³ China (+86)</option>
            <option value="JP" data-code="+81">ðŸ‡¯ðŸ‡µ Japan (+81)</option>
            <option value="BR" data-code="+55">ðŸ‡§ðŸ‡· Brazil (+55)</option>
            <option value="RU" data-code="+7">ðŸ‡·ðŸ‡º Russia (+7)</option>
            <option value="MX" data-code="+52">ðŸ‡²ðŸ‡½ Mexico (+52)</option>
            <option value="TR" data-code="+90">ðŸ‡¹ðŸ‡· Turkey (+90)</option>
            <option value="PL" data-code="+48">ðŸ‡µðŸ‡± Poland (+48)</option>
            <option value="SE" data-code="+46">ðŸ‡¸ðŸ‡ª Sweden (+46)</option>
            <option value="CH" data-code="+41">ðŸ‡¨ðŸ‡­ Switzerland (+41)</option>
            <option value="KR" data-code="+82">ðŸ‡°ðŸ‡· South Korea (+82)</option>
            <option value="AE" data-code="+971">ðŸ‡¦ðŸ‡ª United Arab Emirates (+971)</option>
            <option value="SA" data-code="+966">ðŸ‡¸ðŸ‡¦ Saudi Arabia (+966)</option>
            <option value="EG" data-code="+20">ðŸ‡ªðŸ‡¬ Egypt (+20)</option>
            <option value="NG" data-code="+234">ðŸ‡³ðŸ‡¬ Nigeria (+234)</option>
            <option value="PK" data-code="+92">ðŸ‡µðŸ‡° Pakistan (+92)</option>
            <!-- Add more countries as needed -->
          </select>

          <label class="form-label" for="phone">Phone:</label>
          <div style="display:flex;align-items:center;margin-bottom:18px;">
            <input class="form-input" type="text" id="country-code" name="country-code" value="+44" readonly style="width:70px;margin-right:8px;">
            <input class="form-input" type="tel" id="phone" name="phone" inputmode="tel" autocomplete="tel" placeholder="e.g. 7123456789" style="flex:1;">
          </div>

          <label class="form-label" for="subject">Subject:</label>
          <input class="form-input" type="text" id="subject" name="subject" autocomplete="subject" placeholder="Subject">

          <label class="form-label" for="message">Message:</label>
          <textarea class="form-textarea" id="message" name="message" rows="5" required placeholder="Enter your message here..."></textarea>

          <div class="turnstile-container" style="margin:12px 0 18px;display:flex;justify-content:center;">
            <div class="cf-turnstile" data-sitekey="0x4AAAAAABiF2AdgiP_oN4Ni"
 data-theme="dark" data-callback="onTurnstileSuccess" data-expired-callback="onTurnstileExpired"></div>
          </div>

          <button class="send-btn" type="submit">Send Message</button>
          <div id="form-status" aria-live="polite" style="margin-top:1em;font-weight:500;"></div>
          <p class="contact-note">I look forward to hearing from you!</p>
        </form>

        <script>
(() => {
  const form   = document.getElementById('contact-form');
  const status = document.getElementById('form-status');
  const btn    = form.querySelector('button[type="submit"]');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';

    // Ensure Turnstile token exists
    let token = document.querySelector('input[name="cf-turnstile-response"]')?.value;
    if (!token && window.turnstile) {
      try { token = window.turnstile.getResponse(); } catch(_) {}
    }
    if(!token){
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send Message';
      alert('Please complete the Turnstile challenge before submitting.');
      return;
    }

    const formData = new FormData(form);
    // country code + phone logic
    const countrySelect = document.getElementById('country');
    const countryCodeInput = document.getElementById('country-code');
    const rawPhoneInput = document.getElementById('phone');
    
    let dialCode = countrySelect.options[countrySelect.selectedIndex].dataset.code || '';
    let userVal = rawPhoneInput.value.trim();
    // Remove any leading + if user included it
    userVal = userVal.replace(/^\+/, '');
    // If user typed the dial code already, remove duplication
    if (dialCode && userVal.startsWith(dialCode.replace('+',''))) {
      userVal = userVal.slice(dialCode.length - 1); // dialCode includes + so subtract 1
    }
    // Remove leading 0 from national numbers
    userVal = userVal.replace(/^0+/, '');
    const combined = `${dialCode}${userVal}`;
    formData.set('phone', combined);

    try {
      const res = await fetch(form.action, { method: 'POST', body: formData });
      if(!res.ok) throw new Error('Network response was not ok');
      const json = await res.json().catch(()=>({ ok:true }));
      alert(json.message || 'Message sent successfully!');
      form.reset();
      countryCodeInput.value = '';
      submitBtn.textContent = 'Send Message';
    } catch(err){
      console.error(err);
      alert('There was a problem sending your message. Please try again.');
      submitBtn.textContent = 'Send Message';
    } finally {
      submitBtn.disabled = false; // Allow retry even if token reused; Turnstile may auto-refresh
    }
  });
})();

// Country code logic
const countrySelect = document.getElementById('country');
const countryCodeInput = document.getElementById('country-code');
countrySelect.addEventListener('change', function() {
  const selected = countrySelect.options[countrySelect.selectedIndex];
  countryCodeInput.value = selected.getAttribute('data-code');
});
        </script>

        <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
        <script>
          function onTurnstileSuccess(token){
            // enable submit when token present
            const btn = document.querySelector('#contact-form button[type="submit"]');
            btn.disabled = false;
          }
          function onTurnstileExpired(){
            const btn = document.querySelector('#contact-form button[type="submit"]');
            btn.disabled = true;
          }
        </script>

        <div class="contact-methods">
          <div class="contact-method">
            <a href="https://www.linkedin.com/in/jim-ross-397719276/"
               target="_blank" rel="noopener noreferrer"
               class="contact-link contact-linkedin"
               aria-label="LinkedIn Profile">
              <span class="linkedin-logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="48" height="48" fill="#0A66C2">
                  <rect width="32" height="32" rx="6" fill="#fff"/>
                  <path d="M9 12h3v11H9V12zm1.5-3a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm4.5 3h2.8v1.5h.04c.39-.74 1.34-1.5 2.76-1.5C23.42 12 25 13.34 25 16.08V23h-3v-6.08c0-1.45-.52-2.42-1.82-2.42-1.01 0-1.61.68-1.87 1.34-.1.23-.13.55-.13.87V23h-3V12z" fill="#0A66C2"/>
                </svg>
              </span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Â© 2025 Jim Ross
  </footer>

  <script src="script.js"></script>
</body>
</html>

